<div class="entry-content">
<p>オープンコレクタというものを教えてもらったので紹介します。</p>
<p><br/>=======================================================<br/>■目的<br/>とある電子機器からある信号（トリガー）を取り出し、外部機器に入力する。<br/>外部機器はその信号のOn/Offに応じた高圧出力を出す。<br/><br/>■設計内容<br/>対象の電子機器にはオプション接続用の信号回路が出ていて「オープンコレクタ」という仕様になっている（3.3V)。<br/>ここに、別の常時5Vが出力しているラインを引っ張ってきて、リレー回路を作る。<br/>外部機器は「Low　On」という仕様で0Vのとき出力On、5Vのとき出力offとなる。<br/>電子機器は高圧が欲しいときにOn信号をだす。<br/>=======================================================<br/><br/>つまり、対応したOn/off信号があるので、これを反転させて、リレーで増幅するということになります。<br/><a class="detailOn" href="https://cdn-ak.f.st-hatena.com/images/fotolife/s/s51517765/20160919/20160919111934.png" id="i13560614541"><img alt="" border="0" height="98" src="https://cdn-ak.f.st-hatena.com/images/fotolife/s/s51517765/20160919/20160919111934.png" width="220"/></a><br/><br/>これは、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C8%A5%E9%A5%F3%A5%B8%A5%B9%A5%BF">トランジスタ</a>を使えばできそうなことは予想できます。<br/>ただし、入力と出力が反転しているので、私が知っているNPN<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C8%A5%E9%A5%F3%A5%B8%A5%B9%A5%BF">トランジスタ</a>の使い方ではできないような気がしました。<br/>これまでのNPN<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C8%A5%E9%A5%F3%A5%B8%A5%B9%A5%BF">トランジスタ</a>の使い方では、ベース信号がON（たとえば+3.3）のときコレクタが+5Vになります。<br/><br/></p>
<p><img alt="f:id:s51517765:20170826164629j:plain" class="hatena-fotolife" src="https://cdn-ak.f.st-hatena.com/images/fotolife/s/s51517765/20170826/20170826164629.jpg" title="f:id:s51517765:20170826164629j:plain"/></p>
<p><br/>下図が電子機器のなかに組み込まれているオープンコレクタに関する回路図です。<br/>点線の部分は電子機器のなかにオプション用として組み込まれています。<br/>わたしにとっては<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D6%A5%E9%A5%C3%A5%AF%A5%DC%A5%C3%A5%AF%A5%B9">ブラックボックス</a>ですが、NPN<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C8%A5%E9%A5%F3%A5%B8%A5%B9%A5%BF">トランジスタ</a>でリレーが組めるようになっています。<br/>コレクタの部分が端子として出ています。<br/>ここの<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C8%A5%E9%A5%F3%A5%B8%A5%B9%A5%BF">トランジスタ</a>への入力が3.3Vです。</p>
<p> </p>
<p><img alt="f:id:s51517765:20170826164454j:plain" class="hatena-fotolife" src="https://cdn-ak.f.st-hatena.com/images/fotolife/s/s51517765/20170826/20170826164454.jpg" title="f:id:s51517765:20170826164454j:plain"/></p>
<p><br/><br/>コレクタを「プルアップ抵抗」をつかって5Vに接続します。<br/>コレクタを信号出力に接続します。<br/><br/>このようにすることで、ベースがOnのとき、エミッタとコレクタが繋がるので信号出力はグラウンドに落ちるのでoffになります。<br/>一方、ベースがoffのときエミッタとコレクタは切断されるので、プルアップ抵抗を通じて、信号出力は5Vになります。<br/>このようにして、内部で3.3Vしか持っていない信号を5Vに変換することができます。<br/><br/>ここで、外部機器は5Vの"digitalRead" でOn/offになる仕様です。<br/>0Vのときは明確に、グランドに繋がるので、0Vですが、5Vのときはたして5Vなのでしょうか？<br/><br/>5Vが欲しいとき、5Vと抵抗をはさんで繋がっているので、電流が流れて抵抗による電圧降下が起きると5Vではなくなると考えられます。<br/><br/>しかし、digitalReadが厳密に5Vを必要としなくともHighとなることと、一般に外部機器の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%D4%A1%BC%A5%C0%A5%F3%A5%B9">インピーダンス</a>が高いことから電流は小さく、10ｋΩの抵抗での電圧降下はきわめて小さいのでon/offを検出できるようになっているのだそうです。<br/><br/>参考　プルアップ抵抗　<a class="keyword" href="http://d.hatena.ne.jp/keyword/Wikipedia">Wikipedia</a><br/><a href="https://ja.wikipedia.org/wiki/%E3%83%97%E3%83%AB%E3%82%A2%E3%83%83%E3%83%97%E6%8A%B5%E6%8A%97">https://ja.wikipedia.org/wiki/%E3%83%97%E3%83%AB%E3%82%A2%E3%83%83%E3%83%97%E6%8A%B5%E6%8A%97</a><br/><br/>回路図を作ってみることにしました。<br/>回路図の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D5%A5%EA%A1%BC%A5%BD%A5%D5%A5%C8">フリーソフト</a>として、以下のものを試してみました。<br/><a href="http://www.suigyodo.com/online/schsoft.htm">水魚堂の回路図エディタ</a></p>
</div>