<div class="entry-content">
<p></p><div class="hatena-asin-detail"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4797382228/shirotoakb-22/"><img alt="暗号技術入門 第3版" class="hatena-asin-detail-image" src="https://images-fe.ssl-images-amazon.com/images/I/51V6l3panVL._SL160_.jpg" title="暗号技術入門 第3版"/></a><div class="hatena-asin-detail-info"><p class="hatena-asin-detail-title"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4797382228/shirotoakb-22/">暗号技術入門 第3版</a></p><ul><li><span class="hatena-asin-detail-label">作者:</span> <a class="keyword" href="http://d.hatena.ne.jp/keyword/%B7%EB%BE%EB%B9%C0">結城浩</a></li><li><span class="hatena-asin-detail-label">出版社/メーカー:</span> <a class="keyword" href="http://d.hatena.ne.jp/keyword/SB%A5%AF%A5%EA%A5%A8%A5%A4%A5%C6%A5%A3%A5%D6">SBクリエイティブ</a></li><li><span class="hatena-asin-detail-label">発売日:</span> 2015/08/26</li><li><span class="hatena-asin-detail-label">メディア:</span> 単行本</li><li><a href="http://d.hatena.ne.jp/asin/4797382228/shirotoakb-22" target="_blank">この商品を含むブログ (19件) を見る</a></li></ul></div><div class="hatena-asin-detail-foot"></div></div>この本は、「<a class="keyword" href="http://d.hatena.ne.jp/keyword/%BF%F4%B3%D8%A5%AC%A1%BC%A5%EB">数学ガール</a>」などで有名な<a class="keyword" href="http://d.hatena.ne.jp/keyword/%B7%EB%BE%EB%B9%C0">結城浩</a>の著書です。<div class="hatena-asin-detail"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4797345268/shirotoakb-22/"><img alt="数学ガール/フェルマーの最終定理 (数学ガールシリーズ 2)" class="hatena-asin-detail-image" src="https://images-fe.ssl-images-amazon.com/images/I/51oHd6j7zdL._SL160_.jpg" title="数学ガール/フェルマーの最終定理 (数学ガールシリーズ 2)"/></a><div class="hatena-asin-detail-info"><p class="hatena-asin-detail-title"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4797345268/shirotoakb-22/">数学ガール/フェルマーの最終定理 (数学ガールシリーズ 2)</a></p><ul><li><span class="hatena-asin-detail-label">作者:</span> <a class="keyword" href="http://d.hatena.ne.jp/keyword/%B7%EB%BE%EB%B9%C0">結城浩</a></li><li><span class="hatena-asin-detail-label">出版社/メーカー:</span> <a class="keyword" href="http://d.hatena.ne.jp/keyword/SB%A5%AF%A5%EA%A5%A8%A5%A4%A5%C6%A5%A3%A5%D6">SBクリエイティブ</a></li><li><span class="hatena-asin-detail-label">発売日:</span> 2008/07/30</li><li><span class="hatena-asin-detail-label">メディア:</span> 単行本</li><li><span class="hatena-asin-detail-label">購入</span>: 35人 <span class="hatena-asin-detail-label">クリック</span>: 441回</li><li><a href="http://d.hatena.ne.jp/asin/4797345268/shirotoakb-22" target="_blank">この商品を含むブログ (259件) を見る</a></li></ul></div><div class="hatena-asin-detail-foot"></div></div><p>結城さんは小難しい話をとても分かりやすく説明した著書がたくさんあります。</p><p>内容は、暗号の歴史からはじまり、基本となる公開鍵方式から始まり、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%C8%EB%CC%A9%B8%B0">秘密鍵</a>方式、暗号通貨で知られる<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%CF%A5%C3%A5%B7%A5%E5%B4%D8%BF%F4">ハッシュ関数</a>、デジタル署名、電子証明といった話に触れられています。</p><p>暗号技術は古くは「シーザー暗号」や「単一換字暗号」といったものから始まりました。<br/>
シーザー暗号は、アルファベットを決まった数だけアルファベットの順番にずらしたもの、単一換字暗号はアルファベットをそれぞれ別のアルファベットに置き換えるというものです。<br/>
しかしこれらは、文章の中に出現する文字確率を基準に見ていくと、英文で出現確率が高いのが、e、t、a、o、i、n…であることを利用して解くことができるとされています。<br/>
現代では、このような知識のほかにコンピューターを使った総当たり「<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D6%A5%EB%A1%BC%A5%C8%A5%D5%A5%A9%A1%BC%A5%B9">ブルートフォース</a>アタック」によっても、このような基本的な暗号はすぐに解読されてしまいます。</p><p></p><h3><a class="keyword" href="http://d.hatena.ne.jp/keyword/%B8%F8%B3%AB%B8%B0%B0%C5%B9%E6%CA%FD%BC%B0">公開鍵暗号方式</a></h3>コンピュータとインターネットを使った通信が普及し、なくてはならないものになった現代では、もっと強固な暗号がなければ不正利用されることは容易です。<br/>
そこで、現代では<a class="keyword" href="http://d.hatena.ne.jp/keyword/RSA">RSA</a>といった強固な暗号が知られています。<br/>
暗号なのに<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A2%A5%EB%A5%B4%A5%EA%A5%BA%A5%E0">アルゴリズム</a>が公開されている、というのが現代の暗号です。<br/>
もともと（シーザー暗号のような時代）には暗号というのは、その<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A2%A5%EB%A5%B4%A5%EA%A5%BA%A5%E0">アルゴリズム</a>を秘密にすることによって、情報を守っていました。<br/>
しかし、現代では暗号の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A2%A5%EB%A5%B4%A5%EA%A5%BA%A5%E0">アルゴリズム</a>が分かっても（現実的な時間では）コンピュータを使っても解読できない、というのが良しとされています。<br/>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/RSA">RSA</a>には割り算の余りが使われていて、大きな<a class="keyword" href="http://d.hatena.ne.jp/keyword/%C1%C7%BF%F4">素数</a>を使うことで複雑性を実現します。<br/>
新しい（大きな）<a class="keyword" href="http://d.hatena.ne.jp/keyword/%C1%C7%BF%F4">素数</a>が発見されると盛り上がるのは、このような暗号に活用できるからです。<br/>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/RSA">RSA</a>の仕組みについて説明したwebページは多くありますが、今一つ意味がピンとこなかったのですが、この本の説明ではわかることができました。<br/>
文書でも画像でも電子データはその中身は数字（2進数）なので、これを決まった桁数毎に区切って暗号化するものです。(2進数を10進数や16進数に変換して暗号化してもよい)<br/>
人に見られてもかまわない「公開鍵」によって暗号化した暗号文を受信者にしか知られてはいけない「<a class="keyword" href="http://d.hatena.ne.jp/keyword/%C8%EB%CC%A9%B8%B0">秘密鍵</a>」によって複号化するものです。<br/>
公開鍵に対して、決まった<a class="keyword" href="http://d.hatena.ne.jp/keyword/%C8%EB%CC%A9%B8%B0">秘密鍵</a>があって暗号が成立します。<p>さて問題。<br/>
「<a class="keyword" href="http://d.hatena.ne.jp/keyword/%C8%EB%CC%A9%B8%B0">秘密鍵</a>は受信者（発信者は知っていても問題ない）以外に知られてはいけない。<a class="keyword" href="http://d.hatena.ne.jp/keyword/%C8%EB%CC%A9%B8%B0">秘密鍵</a>は公開鍵とセットで生成される。では<a class="keyword" href="http://d.hatena.ne.jp/keyword/%C8%EB%CC%A9%B8%B0">秘密鍵</a>をどうやって受信者に秘密に送るのか？」<br/>
これは、「鍵配送問題」と言われます。<a class="keyword" href="http://d.hatena.ne.jp/keyword/%C8%EB%CC%A9%B8%B0">秘密鍵</a>が秘密に送付できるのなら暗号なんて必要ありません。<br/>
どのようにこの問題を解決するか？これもこの本でわかります。</p><p></p><h3><a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%CF%A5%C3%A5%B7%A5%E5%B4%D8%BF%F4">ハッシュ関数</a></h3>暗号技術で最近話題になったのが、暗号通貨です。<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%CF%A5%C3%A5%B7%A5%E5%B4%D8%BF%F4">ハッシュ関数</a>とは、文書のようなデータ（中身は2進数）を<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%CF%A5%C3%A5%B7%A5%E5%B4%D8%BF%F4">ハッシュ関数</a>によってハッシュ化すると、もとの文書からは全く予想できない（しかし、もちろん再現性がある）<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%CF%A5%C3%A5%B7%A5%E5%C3%CD">ハッシュ値</a>（数値）に変換できるものです。<br/>
これは確率的に、変換後の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%CF%A5%C3%A5%B7%A5%E5%C3%CD">ハッシュ値</a>が一致するのはもとの文書が同じである以外にあり得ない、という特徴を利用したものです。<br/>
また、変換後の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%CF%A5%C3%A5%B7%A5%E5%C3%CD">ハッシュ値</a>からもとの文書を計算することはできない、というものです。</p><p>暗号通貨では、その前までの取引歴の情報とともに特殊な値「ナンス」をハッシュ変換し、その<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%CF%A5%C3%A5%B7%A5%E5%C3%CD">ハッシュ値</a>が先頭に０がいくつも並ぶようにします。<br/>
このようなナンスを発見するにはひたすら計算するしか方法がないとされています。<br/>
以前の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D6%A5%ED%A5%C3%A5%AF%A5%C1%A5%A7%A1%BC%A5%F3">ブロックチェーン</a>が改ざんされると、ナンスを含めたハッシュの計算結果が不一致になるので、改ざんが発見されます。<br/>
多くの「マイナー」による検証がなされている中でそれを上回る（全マイナーの51%以上の計算力があれば実現可能）計算力でブロックの改ざんを行うことは非常に困難とされていることが、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D6%A5%ED%A5%C3%A5%AF%A5%C1%A5%A7%A1%BC%A5%F3">ブロックチェーン</a>の信頼を形成しています。<br/>
<span itemscope="" itemtype="http://schema.org/Photograph"><img alt="f:id:s51517765:20180901224404p:plain" class="hatena-fotolife" itemprop="image" src="https://cdn-ak.f.st-hatena.com/images/fotolife/s/s51517765/20180901/20180901224404.png" title="f:id:s51517765:20180901224404p:plain"/></span><br/>
<iframe class="embed-card embed-blogcard" frameborder="0" scrolling="no" src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fwww.thoughts-make-things.com%2Fentry%2Fblock-chain-tampering" style="display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;" title="【図解】ブロックチェーンはどのように改ざんされたのか【仮想通貨モナコイン消失】 - 思考は現実化する"></iframe><cite class="hatena-citation"><a href="https://www.thoughts-make-things.com/entry/block-chain-tampering">www.thoughts-make-things.com</a></cite><br/>
</p>
<blockquote>
<p>この「ブロック」には多数の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C8%A5%E9%A5%F3%A5%B6%A5%AF%A5%B7%A5%E7%A5%F3">トランザクション</a>（取引の情報）と直前のブロックのハッシュ、そして 「ナンス（Nonce）」と呼ばれる特別な値が格納されています。<br/>
ハッシュとは１つ前のブロックのデータを要約した短いデータのことです。もし前のブロックのデータが１ビットでも改ざんされてしまうと、そのデータの<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%CF%A5%C3%A5%B7%A5%E5%C3%CD">ハッシュ値</a>が異なってしまい、チェーンをつなぐことができなくなってしまいます。<br/>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D6%A5%ED%A5%C3%A5%AF%A5%C1%A5%A7%A1%BC%A5%F3">ブロックチェーン</a>では取引の検証作業を行なった人が新しい「ブロック」を生成します。この検証作業はナンス（Nonce）という値を計算し見つけ出すことで行います。<br/>
ナンスとは、ブロックのデータを<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%CF%A5%C3%A5%B7%A5%E5%B4%D8%BF%F4">ハッシュ関数</a>に通したときに先頭に0がたくさん並ぶような非常に小さい<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%CF%A5%C3%A5%B7%A5%E5%C3%CD">ハッシュ値</a>が生成されるように調整するための値のことです。<br/>
この値がターゲット値以下になるようにナンスを計算することができると新しいブロックが生成されます。（このナンスを計算する作業がマイニングです。）</p>
</blockquote>
<p><iframe class="embed-card embed-webcard" frameborder="0" scrolling="no" src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fcoinnews.jp%2Farticles%2F604" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;" title="ビットコインにおける『ナンス（nonce）』とは？〜ビットコインで学ぶ『ナンス（nonce）』〜 - COINNEWS"></iframe><cite class="hatena-citation"><a href="https://coinnews.jp/articles/604">coinnews.jp</a></cite></p><p></p><h3>デジタル署名</h3>デジタル署名とは、そのメッセージが確かに送信者が作成したものであることを証明するためのものです。<br/>
ようするに、送信者以外の人間が作成したり、その内容が改竄されていないことを証明するためのものです。<br/>
デジタル署名には公開鍵の仕組みが応用されています。<br/>
しかし、その仕組みは公開鍵方式と逆で送信者のプライベート鍵で暗号化し、公開鍵で復号化します。<br/>
プライベート鍵はその送信者しか知らないはずなので、そのメッセージに対する署名として成立します。<p>ここでも、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%C1%C7%BF%F4">素数</a>と割り算、余りの計算の具体的な例を示して説明されているので、なぜそんなことができるのか？が分かるようになっています。</p><p>デジタル署名は、「メッセージ」と「メッセージとプライベート鍵で作成した署名」のペアを送信し、「公開鍵で署名から復号化したメッセージ」が「送られてきたメッセージ」と一致するかどうかを確認することで検証します。<br/>
しかし、ここで、その公開鍵が本物であるかどうか？という問題が出てきます。</p><p>ここで、（公開鍵の）証明をする<a class="keyword" href="http://d.hatena.ne.jp/keyword/%C7%A7%BE%DA%B6%C9">認証局</a>というものが存在します。<br/>
証明書は「X.509」という標準規格がありますが、だれでも作成でき、つまり、だれでも<a class="keyword" href="http://d.hatena.ne.jp/keyword/%C7%A7%BE%DA%B6%C9">認証局</a>を開設することができます。<br/>
すると、だれでも開設できる<a class="keyword" href="http://d.hatena.ne.jp/keyword/%C7%A7%BE%DA%B6%C9">認証局</a>の認証が信頼できるか？という問題が発生することは容易に想像できます。<br/>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/%C7%A7%BE%DA%B6%C9">認証局</a>は他の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%C7%A7%BE%DA%B6%C9">認証局</a>によって証明書が発行されてその信頼が担保されます。<br/>
すると今度は、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%C7%A7%BE%DA%B6%C9">認証局</a>を認証した<a class="keyword" href="http://d.hatena.ne.jp/keyword/%C7%A7%BE%DA%B6%C9">認証局</a>は信頼できるのか？という問題が発生します。<br/>
堂々巡りですね。</p><p>じつは、この問題は人の社会の信用と同じで、社会的に信用がある人は信用できるという、そういう話になってくるのです。</p><p></p><h3>まとめ</h3><a class="keyword" href="http://d.hatena.ne.jp/keyword/%B7%EB%BE%EB%B9%C0">結城浩</a>さんの「暗号技術入門」を読みました。<br/>
そのなかから、主な技術について（こんなものもあるよ、というレベルですが）紹介しました。<br/>
ごく簡単な数学で説明されているので数学アレルギーでなければ1章あたり30分程度で、全部でも数時間程度で読み切ることができます。<br/>
暗号技術以外にも、現代のインターネットによる通信の仕組みや<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D3%A5%C3%A5%C8%A5%B3%A5%A4%A5%F3">ビットコイン</a>などの暗号通貨について興味のある人におすすめです。<p>通信技術については↓のような書籍も簡単に読めて仕組みが理解できます。</p><div class="hatena-asin-detail"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4569804969/shirotoakb-22/"><img alt="ハッカーの手口 ソーシャルからサイバー攻撃まで (PHP新書)" class="hatena-asin-detail-image" src="https://images-fe.ssl-images-amazon.com/images/I/41vooP%2BgE7L._SL160_.jpg" title="ハッカーの手口 ソーシャルからサイバー攻撃まで (PHP新書)"/></a><div class="hatena-asin-detail-info"><p class="hatena-asin-detail-title"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4569804969/shirotoakb-22/">ハッカーの手口 ソーシャルからサイバー攻撃まで (PHP新書)</a></p><ul><li><span class="hatena-asin-detail-label">作者:</span> <a class="keyword" href="http://d.hatena.ne.jp/keyword/%B2%AC%C5%E8%CD%B5%BB%CB">岡嶋裕史</a></li><li><span class="hatena-asin-detail-label">出版社/メーカー:</span> <a class="keyword" href="http://d.hatena.ne.jp/keyword/PHP%B8%A6%B5%E6%BD%EA">PHP研究所</a></li><li><span class="hatena-asin-detail-label">発売日:</span> 2012/10/16</li><li><span class="hatena-asin-detail-label">メディア:</span> 新書</li><li><span class="hatena-asin-detail-label">購入</span>: 1人 <span class="hatena-asin-detail-label">クリック</span>: 12回</li><li><a href="http://d.hatena.ne.jp/asin/4569804969/shirotoakb-22" target="_blank">この商品を含むブログ (7件) を見る</a></li></ul></div><div class="hatena-asin-detail-foot"></div></div>
</div>