<div class="entry-content">
<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Arduino">Arduino</a>で駅の文字が流れる電光<a class="keyword" href="http://d.hatena.ne.jp/keyword/%B7%C7%BC%A8">掲示</a>板風を作ってみました。</p><p><iframe allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="" frameborder="0" height="270" src="https://www.youtube.com/embed/RNLQdzNa1HA?feature=oembed" width="480"></iframe><cite class="hatena-citation"><a href="https://www.youtube.com/watch?v=RNLQdzNa1HA">www.youtube.com</a></cite></p><p></p><h3>ハードウェアと回路図</h3><span itemscope="" itemtype="http://schema.org/Photograph"><img alt="f:id:s51517765:20200828125302j:plain" class="hatena-fotolife" itemprop="image" src="https://cdn-ak.f.st-hatena.com/images/fotolife/s/s51517765/20200828/20200828125302.jpg" title="f:id:s51517765:20200828125302j:plain"/></span><p><span itemscope="" itemtype="http://schema.org/Photograph"><img alt="f:id:s51517765:20200828125027p:plain" class="hatena-fotolife" itemprop="image" src="https://cdn-ak.f.st-hatena.com/images/fotolife/s/s51517765/20200828/20200828125027.png" title="f:id:s51517765:20200828125027p:plain"/></span></p><p><a class="keyword" href="http://d.hatena.ne.jp/keyword/LCD">LCD</a>は1602というものです。</p><div class="hatena-asin-detail"><a href="https://www.amazon.co.jp/exec/obidos/ASIN/B0757C4W92/shirotoakb-22/"><img alt="KKHMF DC 5V 1602 LCD ディスプレイモジュール 16×2キャラクタ LCDブルーブラックライト" class="hatena-asin-detail-image" src="https://m.media-amazon.com/images/I/41E6ypQ6UzL._SL160_.jpg" title="KKHMF DC 5V 1602 LCD ディスプレイモジュール 16×2キャラクタ LCDブルーブラックライト"/></a><div class="hatena-asin-detail-info"><p class="hatena-asin-detail-title"><a href="https://www.amazon.co.jp/exec/obidos/ASIN/B0757C4W92/shirotoakb-22/">KKHMF DC 5V 1602 LCD ディスプレイモジュール 16×2キャラクタ LCDブルーブラックライト</a></p><ul><li><span class="hatena-asin-detail-label">メディア:</span></li></ul></div><div class="hatena-asin-detail-foot"></div></div><p>可変抵抗は<a class="keyword" href="http://d.hatena.ne.jp/keyword/LCD">LCD</a>のバックライトの明るさ調整用で、私の場合は約50%でちょうどいい感じでした。<br/>
可変抵抗でなく、5kΩ、5kΩの決め打ちでもOKです。</p><p></p><h3><a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%BD%A1%BC%A5%B9%A5%B3%A1%BC%A5%C9">ソースコード</a></h3>サンプルコードを参考に、<code>LiquidCrystal.h</code>をインクルードし、初期化します。
<pre class="code lang-c" data-lang="c" data-unlink=""><span class="synPreProc">#include </span><span class="synConstant">&lt;LiquidCrystal.h&gt;</span>
lcd.begin(displayWidth, <span class="synConstant">2</span>);
</pre><p><code>setCursor</code>で開始位置を指定し、<code>lcd.print(string);</code>で文字列を表示します。</p>
<pre class="code lang-c" data-lang="c" data-unlink="">    lcd.setCursor(<span class="synConstant">0</span>, <span class="synConstant">0</span>);
    lcd.print(string0);
    lcd.setCursor(<span class="synConstant">0</span>, <span class="synConstant">1</span>);
    lcd.print(displayString);
</pre><p>文字列はステップごとに1文字ずつ変更していくことで、流れるように見えます。<br/>
↓は<code>https://s51517765.hatenadiary.jp/</code>を表示させるときのイメージです。<br/>
<span itemscope="" itemtype="http://schema.org/Photograph"><img alt="f:id:s51517765:20200828130433p:plain" class="hatena-fotolife" itemprop="image" src="https://cdn-ak.f.st-hatena.com/images/fotolife/s/s51517765/20200828/20200828130433.png" title="f:id:s51517765:20200828130433p:plain"/></span></p><p>この表示文字列の生成は<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D7%A5%ED%A5%B0%A5%E9%A5%DF%A5%F3%A5%B0%A5%B3%A5%F3%A5%C6%A5%B9%A5%C8">プログラミングコンテスト</a>の文字列系で出てきそうな問題です。<br/>
最初、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A2%A5%EB%A5%B4%A5%EA%A5%BA%A5%E0">アルゴリズム</a>がうまく作れなくて配列外参照をして文字化けが出ました。<br/>
<span itemscope="" itemtype="http://schema.org/Photograph"><img alt="f:id:s51517765:20200828130929p:plain" class="hatena-fotolife" itemprop="image" src="https://cdn-ak.f.st-hatena.com/images/fotolife/s/s51517765/20200828/20200828130929.png" title="f:id:s51517765:20200828130929p:plain"/></span></p><p><iframe class="embed-card embed-webcard" frameborder="0" scrolling="no" src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fgithub.com%2Fs51517765%2FElectric_bulletin_board" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;" title="s51517765/Electric_bulletin_board"></iframe><cite class="hatena-citation"><a href="https://github.com/s51517765/Electric_bulletin_board">github.com</a></cite></p>
</div>