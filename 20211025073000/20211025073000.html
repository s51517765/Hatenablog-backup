<div class="entry-content">
<div class="section">
<h3>ビュートローバーで組込みプログラミング入門</h3>
<p><iframe class="embed-card embed-webcard" frameborder="0" scrolling="no" src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fwww.vstone.co.jp%2Fproducts%2Fbeauto_rover%2Findex.html" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;" title="ビュートローバーARM/H8 (Beauto Rover) | ヴイストン株式会社"></iframe><cite class="hatena-citation"><a href="https://www.vstone.co.jp/products/beauto_rover/index.html">www.vstone.co.jp</a></cite><br/>
</p><div class="hatena-asin-detail"><a class="hatena-asin-detail-image-link" href="https://www.amazon.co.jp/exec/obidos/ASIN/B01B4G3OGK/shirotoakb-22/" rel="noopener" target="_blank"><img alt="プログラミング教育用ロボット ビュートローバー ARM [学習教材] [vstone] (キット本体)" class="hatena-asin-detail-image" src="https://m.media-amazon.com/images/I/51FmXsss5LL._SL500_.jpg" title="プログラミング教育用ロボット ビュートローバー ARM [学習教材] [vstone] (キット本体)"/></a><div class="hatena-asin-detail-info"><p class="hatena-asin-detail-title"><a href="https://www.amazon.co.jp/exec/obidos/ASIN/B01B4G3OGK/shirotoakb-22/" rel="noopener" target="_blank">プログラミング教育用ロボット ビュートローバー ARM [学習教材] [vstone] (キット本体)</a></p><ul class="hatena-asin-detail-meta"><li>ヴイストン</li></ul><a class="asin-detail-buy" href="https://www.amazon.co.jp/exec/obidos/ASIN/B01B4G3OGK/shirotoakb-22/" rel="noopener" target="_blank">Amazon</a></div></div><p>ビュートローバーというキットがメルカリで安く出ていたので入手してARMに入門しました。<br/>
どうやらこのキットは学校で技術？の授業で使われているようで、授業が終わって興味のない人が出品しているようです。</p><p>ARMとはARM社による<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%DE%A5%A4%A5%B3%A5%F3">マイコン</a>でこれまで組込み機器（産業機器や家電）に多く使われてきたCPUですが、最近では<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%DE%A5%DB">スマホ</a>やM1 <a class="keyword" href="http://d.hatena.ne.jp/keyword/Mac">Mac</a>にも使われています。<br/>
もちろんPCに使われているCPUとキットに使われているものでは性能は違うのですが。</p><p>組込みプログラミングは、今でも少ないメモリやさほど性能の高くないデ<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D0%A5%A4%A5%B9">バイス</a>で使うことから独特の風習が残っていて、いわゆる富豪プログラミングと真逆の世界です。<br/>
しかしながら「トリリオンセンサー」などと呼ばれ世の中のあらゆるものがネットワークにつながるIOTの世界では需要があるとされています。</p>
</div>
<div class="section">
<h3>Hello ARM world</h3>
<p>こちらのキットは教育用ということで、ビジュアルプログラミングが対応しています。<br/>
しかし、ここはあえて組込みプログラミング的にやっていこうと思います。<br/>
先のメーカーのサイトの情報を参考に、LPCXPressoという<a class="keyword" href="http://d.hatena.ne.jp/keyword/%C5%FD%B9%E7%B3%AB%C8%AF%B4%C4%B6%AD">統合開発環境</a>を導入し、<a class="keyword" href="http://d.hatena.ne.jp/keyword/C%B8%C0%B8%EC">C言語</a>でプログラミングを目指します。<br/>
<span itemscope="" itemtype="http://schema.org/Photograph"><img alt="f:id:s51517765:20211016181009p:plain" class="hatena-fotolife" height="833" itemprop="image" loading="lazy" src="https://cdn-ak.f.st-hatena.com/images/fotolife/s/s51517765/20211016/20211016181009.png" title="" width="592"/></span><br/>
<span itemscope="" itemtype="http://schema.org/Photograph"><img alt="f:id:s51517765:20211016181044p:plain" class="hatena-fotolife" height="841" itemprop="image" loading="lazy" src="https://cdn-ak.f.st-hatena.com/images/fotolife/s/s51517765/20211016/20211016181044.png" title="" width="600"/></span></p><p>実は、このキットには「ビュートローバーH8」という兄弟キットがあります。<br/>
こちらについては付属のCD-Rに<a class="keyword" href="http://d.hatena.ne.jp/keyword/%C5%FD%B9%E7%B3%AB%C8%AF%B4%C4%B6%AD">統合開発環境</a>も含まれていますが、別物なので注意です。<br/>
H8は<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%EB%A5%CD%A5%B5%A5%B9%A5%A8%A5%EC%A5%AF%A5%C8%A5%ED%A5%CB%A5%AF%A5%B9">ルネサスエレクトロニクス</a>の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%DE%A5%A4%A5%B3%A5%F3">マイコン</a>です。</p><p><iframe class="embed-card embed-webcard" frameborder="0" scrolling="no" src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fwww.nxp.com%2Fdesign%2Fmicrocontrollers-developer-resources%2Flpcxpresso-ide-v8-2-2%3ALPCXPRESSO" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;" title="LPCXpresso IDE v8.2.2 | NXP Semiconductors"></iframe><cite class="hatena-citation"><a href="https://www.nxp.com/design/microcontrollers-developer-resources/lpcxpresso-ide-v8-2-2:LPCXPRESSO">www.nxp.com</a></cite><br/>
こちらのサイトから<a class="keyword" href="http://d.hatena.ne.jp/keyword/%C5%FD%B9%E7%B3%AB%C8%AF%B4%C4%B6%AD">統合開発環境</a>をダウンロードしますが、アカウントの登録が必要になります。<br/>
キットのCD-Rにはサンプルコードは含まれていますが、LPCXPressoは含まれていませんのでこちらからダウンロードする必要があります。<br/>
<span itemscope="" itemtype="http://schema.org/Photograph"><img alt="f:id:s51517765:20211016182730p:plain" class="hatena-fotolife" height="600" itemprop="image" loading="lazy" src="https://cdn-ak.f.st-hatena.com/images/fotolife/s/s51517765/20211016/20211016182730.png" title="" width="1200"/></span><br/>
Downloadをクリックすると、アカウント作成を求められます。<br/>
アカウントを作成したのちLoginし再度このURLからDownloadに進みます。</p><p>各自のOSに合わせた<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%B9%A5%C8%A1%BC%A5%E9">インストーラ</a>を入手します。<br/>
<span itemscope="" itemtype="http://schema.org/Photograph"><img alt="f:id:s51517765:20211016182916p:plain" class="hatena-fotolife" height="640" itemprop="image" loading="lazy" src="https://cdn-ak.f.st-hatena.com/images/fotolife/s/s51517765/20211016/20211016182916.png" title="" width="1200"/></span></p><p>最新版の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%B9%A5%C8%A1%BC%A5%E9">インストーラ</a>をダウンロードし、インストールします。<br/>
この中で<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C7%A5%D0%A5%A4%A5%B9%A5%C9%A5%E9%A5%A4%A5%D0">デバイスドライバ</a>も同時にインストールが始まります。<br/>
<span itemscope="" itemtype="http://schema.org/Photograph"><img alt="f:id:s51517765:20211016183026p:plain" class="hatena-fotolife" height="642" itemprop="image" loading="lazy" src="https://cdn-ak.f.st-hatena.com/images/fotolife/s/s51517765/20211016/20211016183026.png" title="" width="1200"/></span></p><p>インストールが終わったら、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%C5%FD%B9%E7%B3%AB%C8%AF%B4%C4%B6%AD">統合開発環境</a>を起動し左下のインポートプロジェクトからサンプルコードを開きます。<br/>
<span itemscope="" itemtype="http://schema.org/Photograph"><img alt="f:id:s51517765:20211016183242p:plain" class="hatena-fotolife" height="675" itemprop="image" loading="lazy" src="https://cdn-ak.f.st-hatena.com/images/fotolife/s/s51517765/20211016/20211016183242.png" title="" width="1200"/></span></p><p>サンプルコードはZipですが解凍しても、しなくても読み込めるようです。<br/>
ただし、解凍してから読み込んでもどうやら別の場所（後述）に展開されます。<br/>
<span itemscope="" itemtype="http://schema.org/Photograph"><img alt="f:id:s51517765:20211016183546p:plain" class="hatena-fotolife" height="706" itemprop="image" loading="lazy" src="https://cdn-ak.f.st-hatena.com/images/fotolife/s/s51517765/20211016/20211016183546.png" title="" width="714"/></span></p><p>ちょっとだけ触ってみると、例えば関数を右クリック￥Open DeclarationまたはF3で関数定義にジャンプします。<br/>
<span itemscope="" itemtype="http://schema.org/Photograph"><img alt="f:id:s51517765:20211016183811p:plain" class="hatena-fotolife" height="673" itemprop="image" loading="lazy" src="https://cdn-ak.f.st-hatena.com/images/fotolife/s/s51517765/20211016/20211016183811.png" title="" width="1200"/></span></p><p>ビルド（<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B3%A5%F3%A5%D1%A5%A4%A5%EB">コンパイル</a>）を試すために、LEDの点灯時間を変更するという最小限の変更をしてみます。<br/>
変更点がないとビルドが動かないためです。</p>
<pre class="code lang-c" data-lang="c" data-unlink=""><span class="synComment">//ループ</span>
<span class="synStatement">while</span>(<span class="synConstant">1</span>){
	LED(<span class="synConstant">1</span>);		<span class="synComment">//緑のLED点灯</span>
	Wait(<span class="synConstant">2000</span>);	<span class="synComment">//1000msec待つ</span>
	LED(<span class="synConstant">2</span>);		<span class="synComment">//オレンジのLED点灯</span>
	Wait(<span class="synConstant">1000</span>);	<span class="synComment">//1000msec待つ</span>
}
</pre><p>左下のメニューから<code>Build 'xxxxxxx' [debug]</code>をクリックします。<br/>
<span itemscope="" itemtype="http://schema.org/Photograph"><img alt="f:id:s51517765:20211016184519p:plain" class="hatena-fotolife" height="477" itemprop="image" loading="lazy" src="https://cdn-ak.f.st-hatena.com/images/fotolife/s/s51517765/20211016/20211016184519.png" title="" width="635"/></span></p><p>ドキュメントフォルダ以下にある<code>LPCXPress_x_x_x_xxx￥workspace￥xxxx</code>に展開されたソースとともに、Debugフォルダの中にバイナリ(.bin)ファイルがあります。<br/>
<span itemscope="" itemtype="http://schema.org/Photograph"><img alt="f:id:s51517765:20211016184722p:plain" class="hatena-fotolife" height="677" itemprop="image" loading="lazy" src="https://cdn-ak.f.st-hatena.com/images/fotolife/s/s51517765/20211016/20211016184722.png" title="" width="1200"/></span></p><p>セットの電源を切った状態で、プッシュボタンを押しながらUSBを接続します。<br/>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/Windows">Windows</a>の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A8%A5%AF%A5%B9%A5%D7%A5%ED%A1%BC%A5%E9">エクスプローラ</a>でフォルダが見えるので、この中にある<code>firmware.bin</code>を削除してbinファイルをコピーします。<br/>
<span itemscope="" itemtype="http://schema.org/Photograph"><img alt="f:id:s51517765:20211016185039p:plain" class="hatena-fotolife" height="782" itemprop="image" loading="lazy" src="https://cdn-ak.f.st-hatena.com/images/fotolife/s/s51517765/20211016/20211016185039.png" title="" width="460"/></span></p><p>USBを外して再度電源を入れるとLチカが始まります。</p><blockquote class="twitter-tweet" data-conversation="none" data-lang="ja"><p dir="ltr" lang="ja">ARM<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%DE%A5%A4%A5%B3%A5%F3">マイコン</a>入門 ！<br/>LPCXpressoという開発環境を構築してLチカ出来た！ <a href="https://t.co/XhcBaWTWot">pic.twitter.com/XhcBaWTWot</a></p>— とりてん (@s51517765) <a href="https://twitter.com/s51517765/status/1449296354203762695?ref_src=twsrc%5Etfw">2021年10月16日</a></blockquote> <script async="" charset="utf-8" src="https://platform.twitter.com/widgets.js"></script>
</div>
<div class="section">
<h3>まとめ</h3>
<p>CortexM3という<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%DE%A5%A4%A5%B3%A5%F3">マイコン</a>を搭載したキットで組込みプログラミングに入門しました。<br/>
まずはサンプルコードを読むところから、この独特の世界を体験してみようと思います。</p>
</div>
</div>