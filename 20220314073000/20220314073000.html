<div class="entry-content">
<div class="section">
<h3>やっぱり1CHだと物足りない</h3>
<p>電子工作には必須（個人の感想です）の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%AA%A5%B7%A5%ED%A5%B9%A5%B3%A1%BC%A5%D7">オシロスコープ</a>ですが、これまで1CHのものを使ってました。<br/>
しかし、同時に2つの信号を見て波形を比較したい、とか2つの信号のタイミングを比較したい、というときには1CHの<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%AA%A5%B7%A5%ED%A5%B9%A5%B3%A1%BC%A5%D7">オシロスコープ</a>ではどうしても無理なのです。<br/>
というわけで<a class="keyword" href="http://d.hatena.ne.jp/keyword/2CH">2CH</a>の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%AA%A5%B7%A5%ED%A5%B9%A5%B3%A1%BC%A5%D7">オシロスコープ</a>を購入しました。</p><div class="hatena-asin-detail"><a class="hatena-asin-detail-image-link" href="https://www.amazon.co.jp/dp/B09B12H1MG?tag=shirotoakb-22&amp;linkCode=osi&amp;th=1&amp;psc=1" rel="noopener" target="_blank"><img alt="KKnoonデジタル オシロスコープ 1013D 2チャンネル 100MHz * 2 帯域幅 1GSa / s サンプリングレートオシロスコープ 7インチカラー TFT 高解像度 LCD タッチスクリーン付き" class="hatena-asin-detail-image" src="https://m.media-amazon.com/images/I/51zYRXf2F3S._SL500_.jpg" title="KKnoonデジタル オシロスコープ 1013D 2チャンネル 100MHz * 2 帯域幅 1GSa / s サンプリングレートオシロスコープ 7インチカラー TFT 高解像度 LCD タッチスクリーン付き"/></a><div class="hatena-asin-detail-info"><p class="hatena-asin-detail-title"><a href="https://www.amazon.co.jp/dp/B09B12H1MG?tag=shirotoakb-22&amp;linkCode=osi&amp;th=1&amp;psc=1" rel="noopener" target="_blank">KKnoonデジタル オシロスコープ 1013D 2チャンネル 100MHz * 2 帯域幅 1GSa / s サンプリングレートオシロスコープ 7インチカラー TFT 高解像度 LCD タッチスクリーン付き</a></p><ul class="hatena-asin-detail-meta"><li>KKnoon</li></ul><a class="asin-detail-buy" href="https://www.amazon.co.jp/dp/B09B12H1MG?tag=shirotoakb-22&amp;linkCode=osi&amp;th=1&amp;psc=1" rel="noopener" target="_blank">Amazon</a></div></div><p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Amazon">Amazon</a>でいくつか、同じようなものが出ていますが中身はおそらく同じです。<br/>
若干価格や納期が違うのでこのような中から納期の早いものを選択しました。</p>
</div>
<div class="section">
<h3><a class="keyword" href="http://d.hatena.ne.jp/keyword/%B3%AB%C9%F5">開封</a></h3>
<p>今回は国内発送と思われるもので、間違ってプライムを契約してしまったので翌日届きました。（プライムは即解約）<br/>
段ボールイン段ボールですが、中の商品段ボールはボコボコでした。<br/>
中身は無事だったので問題にはしません。<br/>
<span itemscope="" itemtype="http://schema.org/Photograph"><img alt="f:id:s51517765:20220312180504p:plain" class="hatena-fotolife" height="717" itemprop="image" loading="lazy" src="https://cdn-ak.f.st-hatena.com/images/fotolife/s/s51517765/20220312/20220312180504.png" title="" width="1199"/></span></p><p><span itemscope="" itemtype="http://schema.org/Photograph"><img alt="f:id:s51517765:20220312180618p:plain" class="hatena-fotolife" height="777" itemprop="image" loading="lazy" src="https://cdn-ak.f.st-hatena.com/images/fotolife/s/s51517765/20220312/20220312180618.png" title="" width="1199"/></span><br/>
アクセサリーは、英語の説明書、1倍10倍切り替え付プローブ、プローブの説明書、充電その他用（PCと接続してキャプチャ取り込み出来るらしい）USB-Cケーブル、等です。<br/>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/Amazon">Amazon</a>商品ページではMicroUSBぽい写真ですが実際はType-Cになっています。<br/>
<span itemscope="" itemtype="http://schema.org/Photograph"><img alt="f:id:s51517765:20220312180723p:plain" class="hatena-fotolife" height="596" itemprop="image" loading="lazy" src="https://cdn-ak.f.st-hatena.com/images/fotolife/s/s51517765/20220312/20220312180723.png" title="" width="691"/></span></p><p>画面表示上ではCH1が黄色、CH2が青（シアン）ですがプローブのカラーリング（正式名称？）は黄色はなかったので、手もちの他のプローブのものから黄色にしました。<br/>
本体上面にはプローブの差込口、USB、電源があります。<br/>
電源は充電しながらでも使用可能のようです。<br/>
<span itemscope="" itemtype="http://schema.org/Photograph"><img alt="f:id:s51517765:20220312182642p:plain" class="hatena-fotolife" height="676" itemprop="image" loading="lazy" src="https://cdn-ak.f.st-hatena.com/images/fotolife/s/s51517765/20220312/20220312182642.png" title="" width="1199"/></span></p><p>細かな使い方は他の方が詳しく書かれているので省略しますが、AUTO SETというボタンが右のほうにあるので、基本はこれを使えばいいと思います。<br/>
あとは、時間スケールの変更が画面左右のタッチ、カーソル移動がドラッグとかです。<br/>
<span itemscope="" itemtype="http://schema.org/Photograph"><img alt="f:id:s51517765:20220312182407p:plain" class="hatena-fotolife" height="675" itemprop="image" loading="lazy" src="https://cdn-ak.f.st-hatena.com/images/fotolife/s/s51517765/20220312/20220312182407.png" title="" width="1200"/></span><br/>
<iframe class="embed-card embed-webcard" frameborder="0" scrolling="no" src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fwww.jh4vaj.com%2Farchives%2F24836" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;" title="ADS1013D 100MHz 2ch デジタルオシロスコープを使ってみる"></iframe><cite class="hatena-citation"><a href="https://www.jh4vaj.com/archives/24836">www.jh4vaj.com</a></cite><br/>
</p>
</div>
<div class="section">
<h3>Arudinoで任意の電圧を出力する</h3>
<p>さて、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%AA%A5%B7%A5%ED%A5%B9%A5%B3%A1%BC%A5%D7">オシロスコープ</a>で見てみたかったものの一つがローパスフィルタ（平滑化）の実験です。<br/>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/Arduino">Arduino</a>等では、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%DE%A5%A4%A5%B3%A5%F3">マイコン</a>のタイマーにより電圧のON/OFFによりPWMという方式で出力電圧を変更するものがあります。<br/>
モーター等はこのDutyの変化によってトルクや速度を変更します。<br/>
しかしながら、PWMでは都合が悪くON/OFFではなく平均化されたものが欲しい場合があり、このようなものを実現するものです。<br/>
<span itemscope="" itemtype="http://schema.org/Photograph"><img alt="f:id:s51517765:20220312230240p:plain" class="hatena-fotolife" height="255" itemprop="image" loading="lazy" src="https://cdn-ak.f.st-hatena.com/images/fotolife/s/s51517765/20220312/20220312230240.png" title="" width="688"/></span></p><p>これを実現するのが以下のような回路です。LEDと300Ωの抵抗はなくてもいいですがPWMが変わっていることを確認する程度です。<br/>
これに<a class="keyword" href="http://d.hatena.ne.jp/keyword/Arduino">Arduino</a>のGPIOからPWMを出力すると、CH1ではもとのPWM波形、CH2では平滑化された直流電圧を得ることが出来ます。<br/>
<span itemscope="" itemtype="http://schema.org/Photograph"><img alt="f:id:s51517765:20220312183534p:plain" class="hatena-fotolife" height="400" itemprop="image" loading="lazy" src="https://cdn-ak.f.st-hatena.com/images/fotolife/s/s51517765/20220312/20220312183534.png" title="" width="640"/></span></p><p>①Refarenceとして<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B3%A5%F3%A5%C7%A5%F3%A5%B5">コンデンサ</a>が無いとき<br/>
そのままの波形が出力されます。<br/>
<span itemscope="" itemtype="http://schema.org/Photograph"><img alt="f:id:s51517765:20220312225647p:plain" class="hatena-fotolife" height="676" itemprop="image" loading="lazy" src="https://cdn-ak.f.st-hatena.com/images/fotolife/s/s51517765/20220312/20220312225647.png" title="" width="1199"/></span><br/>
②10μFの<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B3%A5%F3%A5%C7%A5%F3%A5%B5">コンデンサ</a><br/>
波形が少し滑らかになろうとしていますが、まだ振幅があります。<br/>
Vppが少し小さくなっています。<br/>
<span itemscope="" itemtype="http://schema.org/Photograph"><img alt="f:id:s51517765:20220312225832p:plain" class="hatena-fotolife" height="676" itemprop="image" loading="lazy" src="https://cdn-ak.f.st-hatena.com/images/fotolife/s/s51517765/20220312/20220312225832.png" title="" width="1199"/></span><br/>
③100μFの<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B3%A5%F3%A5%C7%A5%F3%A5%B5">コンデンサ</a><br/>
完全にフラットになりました。つまり直流が得られています。<br/>
Vppが0VとなりVrmsが2.49VとなったちょうどDuty分の半分の電圧の直流になりました。<br/>
<span itemscope="" itemtype="http://schema.org/Photograph"><img alt="f:id:s51517765:20220312225937j:plain" class="hatena-fotolife" height="676" itemprop="image" loading="lazy" src="https://cdn-ak.f.st-hatena.com/images/fotolife/s/s51517765/20220312/20220312225937.jpg" title="" width="1200"/></span><br/>
</p>
</div>
<div class="section">
<h3>まとめ</h3>
<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/2CH">2CH</a>の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%AA%A5%B7%A5%ED%A5%B9%A5%B3%A1%BC%A5%D7">オシロスコープ</a>、買ってよかったです。<br/>
電圧レンジによっては電圧値がずれるのはいくらかありますが、これなら趣味のレベルなら許容範囲かな、という感じです。<br/>
この部分もこれまで使っていたミニ<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%AA%A5%B7%A5%ED">オシロ</a>がずれが大きくてやや不満でした。<br/>
1CHしかないときは入力側を見て、付け替えて出力側を見て…、といったことを繰り返していたのに対して<a class="keyword" href="http://d.hatena.ne.jp/keyword/2CH">2CH</a>なら同時に見れるのはとても良いです。</p><p>PWMの平滑化については抵抗（電流）や振幅によって<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B3%A5%F3%A5%C7%A5%F3%A5%B5">コンデンサ</a>の最適値は変わります。<br/>
基本的には大き目にしておけば平滑性能は高くなります。<br/>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B3%A5%F3%A5%C7%A5%F3%A5%B5">コンデンサ</a>が<a class="keyword" href="http://d.hatena.ne.jp/keyword/%C5%C5%B2%D9">電荷</a>を蓄えることで、出力が下がったときに補われるイメージですね。</p>
</div>
</div>