<div class="entry-content">
<div class="section">
<h3>振動モーターを使ってみた</h3>
<p></p><div class="hatena-asin-detail"><a class="hatena-asin-detail-image-link" href="https://www.amazon.co.jp/dp/B07CJ9M28B?tag=shirotoakb-22&amp;linkCode=osi&amp;th=1&amp;psc=1" rel="noopener" target="_blank"><img alt="uxcell DC振動モーター マイクロモーター 電動機 コイン形 線付き DC 3V 5個入り" class="hatena-asin-detail-image" src="https://m.media-amazon.com/images/I/417-7YCuWUL._SL500_.jpg" title="uxcell DC振動モーター マイクロモーター 電動機 コイン形 線付き DC 3V 5個入り"/></a><div class="hatena-asin-detail-info"><p class="hatena-asin-detail-title"><a href="https://www.amazon.co.jp/dp/B07CJ9M28B?tag=shirotoakb-22&amp;linkCode=osi&amp;th=1&amp;psc=1" rel="noopener" target="_blank">uxcell DC振動モーター マイクロモーター 電動機 コイン形 線付き DC 3V 5個入り</a></p><ul class="hatena-asin-detail-meta"><li>uxcell</li></ul><a class="asin-detail-buy" href="https://www.amazon.co.jp/dp/B07CJ9M28B?tag=shirotoakb-22&amp;linkCode=osi&amp;th=1&amp;psc=1" rel="noopener" target="_blank">Amazon</a></div></div><div class="hatena-asin-detail"><a class="hatena-asin-detail-image-link" href="https://www.amazon.co.jp/dp/B08B87WWHV?tag=shirotoakb-22&amp;linkCode=osi&amp;th=1&amp;psc=1" rel="noopener" target="_blank"><img alt="VKLSVAN 2個セット L298N DCステッパ モータドライバ コントローラボード モジュール デュアルHブリッジ Arduinoと互換" class="hatena-asin-detail-image" src="https://m.media-amazon.com/images/I/51mFz98FhEL._SL500_.jpg" title="VKLSVAN 2個セット L298N DCステッパ モータドライバ コントローラボード モジュール デュアルHブリッジ Arduinoと互換"/></a><div class="hatena-asin-detail-info"><p class="hatena-asin-detail-title"><a href="https://www.amazon.co.jp/dp/B08B87WWHV?tag=shirotoakb-22&amp;linkCode=osi&amp;th=1&amp;psc=1" rel="noopener" target="_blank">VKLSVAN 2個セット L298N DCステッパ モータドライバ コントローラボード モジュール デュアルHブリッジ Arduinoと互換</a></p><ul class="hatena-asin-detail-meta"><li>VKLSVAN</li></ul><a class="asin-detail-buy" href="https://www.amazon.co.jp/dp/B08B87WWHV?tag=shirotoakb-22&amp;linkCode=osi&amp;th=1&amp;psc=1" rel="noopener" target="_blank">Amazon</a></div></div><p><span itemscope="" itemtype="http://schema.org/Photograph"><img class="hatena-fotolife" height="676" itemprop="image" loading="lazy" src="https://cdn-ak.f.st-hatena.com/images/fotolife/s/s51517765/20220703/20220703170436.png" title="" width="1200"/></span></p><p>振動モーターというのは<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%DE%A5%DB">スマホ</a>のバイブレーションに使われているような振動を起こさせるモーターです。<br/>
しかし内部的には一般のDCモーターと同じようです。<br/>
ですので、DCモーターの駆動と同じく、DCモーター用のドライバを使って動作させることが出来ます。</p><p>今回は<a class="keyword" href="http://d.hatena.ne.jp/keyword/Amazon">Amazon</a>で購入できる上記の安いモータードライバを使って動かしてみました。<br/>
<span itemscope="" itemtype="http://schema.org/Photograph"><img class="hatena-fotolife" height="772" itemprop="image" loading="lazy" src="https://cdn-ak.f.st-hatena.com/images/fotolife/s/s51517765/20220703/20220703171219.png" title="" width="847"/></span></p><p>以前、以下の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%BD%A9%B7%EE%C5%C5%BB%D2">秋月電子</a>のモータードライ<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D0%A5%E2">バモ</a>ジュールを<a class="keyword" href="http://d.hatena.ne.jp/keyword/Arduino">Arduino</a>で使ってみたことがあったのですが、こちらではモーターの駆動用電源（回路中の<a class="keyword" href="http://d.hatena.ne.jp/keyword/VM">VM</a>）とモジュールの電源（VCC）が分離されています。<br/>
ですから、今回のような3V（以下）で動かすようなモーターを直感的に制御できるのですが、今回のL298Nのドライバでは負荷（モーター）用の電源が５V以上となっています。<br/>
また、モーターの駆動用電源とモジュールの電源が共通となっています。<br/>
<iframe class="embed-card embed-webcard" frameborder="0" scrolling="no" src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fakizukidenshi.com%2Fcatalog%2Fg%2FgK-11219%2F" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;" title="ＴＢ６６１２使用　Ｄｕａｌ　ＤＣモータードライブキット: 半導体(モジュール) 秋月電子通商-電子部品・ネット通販"></iframe><cite class="hatena-citation"><a href="https://akizukidenshi.com/catalog/g/gK-11219/">akizukidenshi.com</a></cite><br/>
<span itemscope="" itemtype="http://schema.org/Photograph"><img class="hatena-fotolife" height="278" itemprop="image" loading="lazy" src="https://cdn-ak.f.st-hatena.com/images/fotolife/s/s51517765/20220703/20220703171540.png" title="" width="386"/></span></p><p>つまり、今回の組み合わせは「モーターの駆動用電源とモジュールの電源」が共通で５V以上、しかし駆動したいモーターは３Vとなります。<br/>
そこで、写真のようにモーターを3直列（定格9V）として電源に９VのACアダプタから入力するということで動作させることが出来ました。</p>
</div>
<div class="section">
<h3>回路とプログラム</h3>
<p>回路は<a class="keyword" href="http://d.hatena.ne.jp/keyword/Arduino">Arduino</a>のD3~D6をモータードライバのIN1~IN6に接続し、電源にはACアダプタから９Vを入力します。（トップの写真参照）<br/>
モーターは2系統接続できます。<br/>
モーターの速度は <code>analogWrite(IN1, MoterPower);</code>のようにPWMで制御することが出来ます。</p>
<pre class="code lang-c" data-lang="c" data-unlink=""><span class="synComment">//モータードライバ設定</span>
<span class="synType">const</span> <span class="synType">int</span> IN1 = <span class="synConstant">3</span>;        <span class="synComment">// IN1ピンをD3に</span>
<span class="synType">const</span> <span class="synType">int</span> IN2 = <span class="synConstant">4</span>;        <span class="synComment">// IN2ピンをD4に</span>
<span class="synType">const</span> <span class="synType">int</span> IN3 = <span class="synConstant">5</span>;        <span class="synComment">// IN3ピンをD5に</span>
<span class="synType">const</span> <span class="synType">int</span> IN4 = <span class="synConstant">6</span>;        <span class="synComment">// IN4ピンをD6に</span>
<span class="synType">const</span> <span class="synType">int</span> MoterPower = <span class="synConstant">128</span>; <span class="synComment">//モーターの速度 1～255</span>

<span class="synType">void</span> <span class="synIdentifier">setup</span>() {
  <span class="synComment">//モータードライバ設定</span>
  <span class="synIdentifier">pinMode</span>(IN1, OUTPUT);   <span class="synComment">// デジタルピンを出力に設定</span>
  <span class="synIdentifier">pinMode</span>(IN2, OUTPUT);
  <span class="synIdentifier">pinMode</span>(IN3, OUTPUT);
  <span class="synIdentifier">pinMode</span>(IN4, OUTPUT);
}

<span class="synType">void</span> <span class="synIdentifier">MoterStop</span>() {
  <span class="synIdentifier">analogWrite</span>(IN1, <span class="synConstant">0</span>);  <span class="synComment">// 2つのモーターを停止</span>
  <span class="synIdentifier">analogWrite</span>(IN2, <span class="synConstant">0</span>);
  <span class="synIdentifier">analogWrite</span>(IN3, <span class="synConstant">0</span>);
  <span class="synIdentifier">analogWrite</span>(IN4, <span class="synConstant">0</span>);
}
<span class="synType">void</span> <span class="synIdentifier">MoterRotate</span>() {
  <span class="synComment">// モーターの両端の出力の組み合わせでモーター回転</span>
  <span class="synComment">// 2つのモーターを正回転</span>
  <span class="synIdentifier">analogWrite</span>(IN1, MoterPower);
  <span class="synIdentifier">analogWrite</span>(IN2, <span class="synConstant">0</span>);
  <span class="synIdentifier">analogWrite</span>(IN3, MoterPower);
  <span class="synIdentifier">analogWrite</span>(IN4, <span class="synConstant">0</span>);
}
<span class="synType">void</span> <span class="synIdentifier">loop</span>() {
  <span class="synIdentifier">MoterStop</span>();<span class="synComment">//モーターを止める</span>
  <span class="synIdentifier">delay</span>(<span class="synConstant">1000</span>);
  <span class="synIdentifier">MoterRotate</span>();<span class="synComment">//モーターを動かす</span>
  <span class="synIdentifier">delay</span>(<span class="synConstant">1000</span>);
}
</pre><p>モータードライバはこのようにすると<a class="keyword" href="http://d.hatena.ne.jp/keyword/%B6%EB%B7%C1%C7%C8">矩形波</a>でモーターに出力をすることができ、このDutyによって速度の調整が出来ます。<br/>
通常、DCモーターでは正転逆転をIN1とIN2、IN3とIN4の電圧をどちらをHIGHにするかで設定できますが、今回のような振動モーターでは逆電圧にしても特に意味がありません。</p>
</div>
<div class="section">
<h3>まとめ</h3>
<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Amazon">Amazon</a>で購入できる安いモータードライバと振動モーターを使ってみました。<br/>
注意点としては負荷電圧（モーターに引火する電圧）が5V以上となります。<br/>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%DE%A5%D6%A5%C1%A5%E2%A1%BC%A5%BF%A1%BC">マブチモーター</a>単品など3Vや1.5Vなど低い電圧を使いたい場合などはこのモータードライバを使うことが出来ないので、上で紹介した<a class="keyword" href="http://d.hatena.ne.jp/keyword/%BD%A9%B7%EE%C5%C5%BB%D2">秋月電子</a>のモータードライ<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D0%A5%E2">バモ</a>ジュールなどを使う必要があります。</p>
</div>
<div class="section">
<h3>参考</h3>
<p><iframe class="embed-card embed-webcard" frameborder="0" scrolling="no" src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fburariweb.info%2Felectronic-work%2Farduino-learning%2Farduino-motor-driver-l298n.html" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;" title="【Arduino入門編㉒】ArduinoでDCモーターを制御する。【L298Nデュアルモータードライバ】"></iframe><cite class="hatena-citation"><a href="https://burariweb.info/electronic-work/arduino-learning/arduino-motor-driver-l298n.html">burariweb.info</a></cite></p>
</div>
</div>